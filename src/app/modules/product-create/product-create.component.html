<div class="flex flex-col min-h-screen">
  <app-navbar></app-navbar>
  <div class="flex flex-1">
    <app-sidebar></app-sidebar>
    <main class="flex-1 p-6">
      <h1 class="text-2xl font-bold mb-4">Crear Productos</h1>

      <div class="bg-gray-100 p-6 rounded-lg shadow-md w-3/4 mx-auto">
        <form [formGroup]="productoForm" (ngSubmit)="crearProducto()">

          <!-- Nombre -->
          <div class="mb-4">
            <label class="block text-gray-700 mb-1">Nombre</label>
            <input type="text" formControlName="nombre"
                   class="w-full p-2 border rounded bg-white focus:ring-2 focus:ring-[#7E493B] focus:border-transparent">
          </div>

          <!-- Descripción -->
          <div class="mb-4">
            <label class="block text-gray-700 mb-1">Descripción</label>
            <textarea formControlName="descripcion" rows="3"
                      class="w-full p-2 border rounded bg-white focus:ring-2 focus:ring-[#7E493B] focus:border-transparent"></textarea>
          </div>

          <!-- Precios -->
          <div class="grid grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-gray-700 mb-1">Precio</label>
              <input type="number" step="0.01" formControlName="precio"
                     class="w-full p-2 border rounded bg-white focus:ring-2 focus:ring-[#7E493B] focus:border-transparent">
            </div>
            <div>
              <label class="block text-gray-700 mb-1">Precio Oferta (opcional)</label>
              <input type="number" step="0.01" formControlName="precioOferta"
                     class="w-full p-2 border rounded bg-white focus:ring-2 focus:ring-[#7E493B] focus:border-transparent">
            </div>
          </div>

          <!-- Categoría -->
          <div class="mb-4">
            <label class="block text-gray-700 mb-1">Categoría</label>
            <select formControlName="idCategoria"
                    class="w-full p-2 border rounded bg-white focus:ring-2 focus:ring-[#7E493B] focus:border-transparent">
              <option value="" disabled selected>Seleccione una categoría</option>
              <option *ngFor="let cat of categorias" [value]="cat.id">
                {{ cat.categoriaNombre }}
              </option>
            </select>
          </div>

          <!-- Estado -->
          <div class="mb-4 flex items-center gap-2">
            <input type="checkbox" formControlName="activo" id="activo"
                   class="w-4 h-4 text-[#7E493B] focus:ring-[#7E493B]">
            <label for="activo" class="text-gray-700">Producto activo</label>
          </div>

          <!-- Imágenes -->
          <div class="mb-6">
            <label class="block text-gray-700 mb-2">Imágenes</label>
            
            <!-- Imagen 1 (Requerida) -->
            <div class="mb-4">
              <input type="file" id="img1" class="hidden" accept="image/*"
                     (change)="onImageSelected($event, 1)" required>
              <label for="img1"
                     class="w-full p-2 border rounded bg-[#7E493B] text-white text-center cursor-pointer hover:bg-[#6a3d32] transition-colors">
                Seleccionar imagen principal *
              </label>
              <div *ngIf="imagenUrl1" class="mt-2">
                <img [src]="imagenUrl1" class="max-h-32 w-auto rounded border">
              </div>
            </div>

            <!-- Imagen 2 (Opcional) -->
            <div class="mb-4">
              <input type="file" id="img2" class="hidden" accept="image/*"
                     (change)="onImageSelected($event, 2)">
              <label for="img2"
                     class="w-full p-2 border rounded bg-[#7E493B] text-white text-center cursor-pointer hover:bg-[#6a3d32] transition-colors">
                Seleccionar imagen secundaria (opcional)
              </label>
              <div *ngIf="imagenUrl2" class="mt-2">
                <img [src]="imagenUrl2" class="max-h-32 w-auto rounded border">
              </div>
            </div>

            <!-- Imagen 3 (Opcional) -->
            <div class="mb-4">
              <input type="file" id="img3" class="hidden" accept="image/*"
                     (change)="onImageSelected($event, 3)">
              <label for="img3"
                     class="w-full p-2 border rounded bg-[#7E493B] text-white text-center cursor-pointer hover:bg-[#6a3d32] transition-colors">
                Seleccionar imagen adicional (opcional)
              </label>
              <div *ngIf="imagenUrl3" class="mt-2">
                <img [src]="imagenUrl3" class="max-h-32 w-auto rounded border">
              </div>
            </div>
          </div>

          <!-- Botones -->
          <div class="flex justify-end gap-4 mt-6">
            <button type="button" (click)="cancelar()"
                    class="px-4 py-2 rounded border border-gray-500 text-gray-700 hover:bg-gray-100 transition-colors">
              Cancelar
            </button>
            <button type="submit" [disabled]="productoForm.invalid"
                    class="px-4 py-2 rounded bg-[#7E493B] text-white hover:bg-[#6a3d32] transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
              Crear Producto
            </button>
          </div>

        </form>
      </div>
    </main>
  </div>
</div>